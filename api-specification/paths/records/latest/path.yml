# /records/latest
post:
  tags: [records]
  summary: Add a new weather record
  description: Adds a new weather record. The api processes the record in multiple ways (e.g. to update the highs and lows). One have to use the configured units. The used api key needs write access.
  requestBody:
    content:
      application/json:
        schema:
          $ref: "../../../comps/record.yml#/Record"
  responses:
    "201":
      description: OK
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                enum: [true]
    "400":
      description: Bad request. You passed invalid query parameters.
      content:
        application/json:
          schema:
            $ref: "../../../comps/error.yml#/BadQueryParamsError"
    "403":
      description: Access denied. Your api key is missing, invalid or has no write access.
      content:
        application/json:
          schema:
            $ref: "../../../comps/error.yml#/AuthentificationError"
    "503":
      description: Service unavailable. Either no data or only outdated data is available.
      content:
        application/json:
          schema:
            oneOf:
              - $ref: "../../../comps/error.yml#/OutdatedDataError"
              - $ref: "../../../comps/error.yml#/NoDataError"
    "500":
      description: Internal server error. Multiple reasons are possible. Probably the database connection failed.
      content:
        application/json:
          schema:
            $ref: "../../../comps/error.yml#/InternalError"
get:
  tags: [records]
  summary: Get the most recently measured weather data
  description: Returns the most recently measured weather data, which is automatically converted into the desired units. If no units are passed the configured default units will be used. Your api key needs read access.
  parameters:
    - $ref: "../../../params/rain-unit.yml"
    - $ref: "../../../params/wind-unit.yml"
    - $ref: "../../../params/pressure-unit.yml"
    - $ref: "../../../params/solar-radiation-unit.yml"
    - $ref: "../../../params/temperature-unit.yml"
    - $ref: "../../../params/leaf-temperature-unit.yml"
    - $ref: "../../../params/soil-temperature-unit.yml"
    - $ref: "../../../params/soil-moisture-unit.yml"
    - $ref: "../../../params/humidity-unit.yml"
    - $ref: "../../../params/evo-transpiration-unit.yml"
  responses:
    "200":
      description: OK
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              latestRecord:
                $ref: "../../../comps/record.yml#/Record"
    "400":
      description: Bad request. You passed invalid query parameters.
      content:
        application/json:
          schema:
            $ref: "../../../comps/error.yml#/BadQueryParamsError"
    "403":
      description: Access denied. Your api key is missing, invalid or has no read access.
      content:
        application/json:
          schema:
            $ref: "../../../comps/error.yml#/AuthentificationError"
    "503":
      description: Service unavailable. Either no data or only outdated data is available.
      content:
        application/json:
          schema:
            oneOf:
              - $ref: "../../../comps/error.yml#/OutdatedDataError"
              - $ref: "../../../comps/error.yml#/NoDataError"
    "500":
      description: Internal server error. Multiple reasons are possible. Probably the database connection failed.
      content:
        application/json:
          schema:
            $ref: "../../../comps/error.yml#/InternalError"
